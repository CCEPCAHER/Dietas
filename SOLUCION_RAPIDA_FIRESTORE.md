# ‚ö†Ô∏è SOLUCI√ìN R√ÅPIDA - Error de Firestore

## El problema que tienes

El error `WebChannelConnection RPC 'Write' stream transport errored` significa que **Firestore est√° rechazando las operaciones de escritura** por falta de permisos.

## Soluci√≥n Inmediata (5 minutos)

### Paso 1: Ir a Firebase Console
1. Abre https://console.firebase.google.com/
2. Selecciona tu proyecto: **maikafit-f1756**

### Paso 2: Habilitar Firestore (si no est√° habilitado)
1. Men√∫ lateral ‚Üí **Firestore Database**
2. Si dice "No creada" ‚Üí Clic en **"Crear base de datos"**
3. Selecciona **"Comenzar en modo de prueba"**
4. Elige ubicaci√≥n ‚Üí **"Habilitar"**

### Paso 3: Configurar Reglas de Seguridad (IMPORTANTE)
1. En Firestore Database, ve a la pesta√±a **"Reglas"**
2. **BORRA** todo lo que hay
3. **PEGA** esto:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}
```

4. Haz clic en **"Publicar"**

‚ö†Ô∏è **NOTA**: Estas reglas permiten acceso completo a usuarios autenticados. Solo para desarrollo.

### Paso 4: Verificar en la App
1. Recarga la p√°gina de la aplicaci√≥n
2. Abre la consola (F12)
3. Deber√≠as ver menos errores

### Paso 5: Probar Crear Cliente
1. Haz clic en "üë• Mis Clientes"
2. Haz clic en "‚ûï Nuevo Cliente"
3. Rellena el formulario
4. Guarda

Si funciona, ¬°listo! Si no, revisa la consola para m√°s detalles.

## Verificaci√≥n R√°pida

En la consola del navegador (F12), ejecuta:
```javascript
verificarFirestore()
```

Esto te dir√° exactamente qu√© est√° fallando.

## Si el Error Persiste

1. **Verifica Authentication:**
   - Firebase Console ‚Üí Authentication
   - Aseg√∫rate de que "Email/Password" est√© habilitado

2. **Limpia el cache:**
   - Ctrl + Shift + Delete
   - Borra cache y datos de sitios
   - Recarga

3. **Verifica credenciales:**
   - Abre `firebase-config.js`
   - Verifica que todas las credenciales sean correctas

## Reglas Avanzadas (Opcional - M√°s Seguras)

Si quieres reglas m√°s espec√≠ficas para producci√≥n:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Usuarios - solo el propio usuario
    match /usuarios/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Dietas - el creador puede hacer todo
    match /dietas/{dietaId} {
      allow read, write: if request.auth != null;
      allow create: if request.auth != null && request.resource.data.userId == request.auth.uid;
      allow update, delete: if request.auth != null && 
        resource.data.userId == request.auth.uid;
    }
    
    // Clientas - el nutricionista puede hacer todo con sus clientes
    match /clientes/{clienteId} {
      allow read, write: if request.auth != null;
      allow create: if request.auth != null && 
        request.resource.data.nutricionistaId == request.auth.uid;
      allow update, delete: if request.auth != null && 
        resource.data.nutricionistaId == request.auth.uid;
    }
  }
}
```

**Nota**: Para estas reglas avanzadas, necesitar√°s crear √≠ndices en Firestore si usas `orderBy` con `where`.

